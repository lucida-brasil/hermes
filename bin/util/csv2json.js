"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function f(e){var r=e.toLowerCase().replace("table:","").trim();r=_path3["default"].resolve(_configJson.files.base,r);var t=_fs2["default"].readFileSync(r,"utf-8");return csv2json(t)}function csv2json(e){e=(0,_replaceAll2["default"])(e,"\r","");for(var r=[],t=e=e.split("\n"),l=0;l<t.length;l++)t[l]=t[l].split(";");for(var a=t.shift(),l=0;l<a.length;l++)a[l]=(0,_sanitizeStr2["default"])(a[l]);for(var i=0;i<t.length;i++){for(var n=t[i],s=void 0,u={},l=0;l<a.length;l++)n[l]&&(s=a[l],u[s]=n[l],0===n[l].indexOf("table:")&&(u[s]=f(u[s])));Object.keys(u).length>0&&r.push(u)}return r}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=csv2json;var _fs=require("fs"),_fs2=_interopRequireDefault(_fs),_replaceAll=require("./replace-all"),_replaceAll2=_interopRequireDefault(_replaceAll),_sanitizeStr=require("./sanitize-str"),_sanitizeStr2=_interopRequireDefault(_sanitizeStr),_path2=require("path"),_path3=_interopRequireDefault(_path2),_configJson=require("../../config.json");module.exports=exports["default"];