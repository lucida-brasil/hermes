"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function replaceAll(e,i,r){for(;-1!==e.indexOf(i);)e=e.replace(i,r);return e}function csv2json(e){e=replaceAll(e,"\r","");var i=e.split("\n"),r=[],t=i.shift().split(";");return i.pop(),i.forEach(function(e){e=e.split(";");var i={};t.forEach(function(r,t){i[r]=e[t]}),r.push(i)}),r}var _fs=require("fs"),_fs2=_interopRequireDefault(_fs),_path=require("path"),_path2=_interopRequireDefault(_path),_mailClass=require("./mail.class"),_mailClass2=_interopRequireDefault(_mailClass),_configJson=require("../config.json"),_configJson2=_interopRequireDefault(_configJson),_smtp=require("./smtp"),_smtp2=_interopRequireDefault(_smtp),base_dir=_path2["default"].resolve(_configJson2["default"].files.base),folders=_fs2["default"].readdirSync(base_dir),dir=_path2["default"].join(base_dir,"m1/mailing.csv");_fs2["default"].readFile(dir,"utf-8",function(e,i){var r=csv2json(i);r.forEach(function(e){e.to=replaceAll(e.to," ","").split(",");var i=new _mailClass2["default"](_configJson2["default"].email.user,e.to,e.message,e.subject);i.send(_smtp2["default"])})});